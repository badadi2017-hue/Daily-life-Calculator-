<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Daily Life Calculator</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.0/Sortable.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

<style>
/* --- VARIABLES (Apple iOS Glass) --- */
:root {
  --orb1: #007AFF; 
  --orb2: #AF52DE; 
  --bg-base: #F2F2F7;
  --text: #000000;
  --text-sec: #3C3C4399;
  --glass-card: rgba(255, 255, 255, 0.65);
  --glass-border: rgba(255, 255, 255, 0.4);
  --glass-input: rgba(118, 118, 128, 0.12);
  --glass-menu: rgba(249, 249, 249, 0.94);
  --accent: #007AFF; 
  --shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.08);
  --danger: #FF3B30;
  --warn: #FF9500;
  --c-hour: #007AFF; --c-min: #34C759; --c-sec: #FF3B30;
  --emi-principal: #34C759; --emi-interest: #FF3B30;
}

body.dark {
  --orb1: #0A84FF; --orb2: #BF5AF2; --bg-base: #000000;
  --text: #FFFFFF; --text-sec: #EBEBF599;
  --glass-card: rgba(30, 30, 30, 0.60); 
  --glass-border: rgba(255, 255, 255, 0.1);
  --glass-input: rgba(118, 118, 128, 0.24);
  --glass-menu: rgba(25, 25, 25, 0.94);
  --danger: #FF453A; --warn: #FF9F0A;
  --shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.4);
}

* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
html, body { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; position: fixed; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background: var(--bg-base); color: var(--text); transition: background 0.3s; }

.bg-mesh { position: absolute; width: 100%; height: 100%; z-index: -2; background: radial-gradient(circle at 0% 0%, var(--orb1), transparent 60%), radial-gradient(circle at 100% 100%, var(--orb2), transparent 60%); opacity: 0.25; filter: blur(80px); animation: pulse 10s ease-in-out infinite alternate; }
@keyframes pulse { 0%{opacity:0.25;} 100%{opacity:0.4;} }

.floater { position: absolute; border-radius: 50%; filter: blur(40px); z-index: -1; opacity: 0.4; animation: float 20s infinite ease-in-out; }
.f1 { width: 200px; height: 200px; background: var(--orb1); top: 10%; left: 10%; animation-duration: 25s; }
.f2 { width: 250px; height: 250px; background: var(--orb2); bottom: 10%; right: 10%; animation-duration: 28s; animation-delay: -5s; }
.f3 { width: 150px; height: 150px; background: #34C759; top: 40%; left: 60%; animation-duration: 32s; animation-delay: -10s; opacity: 0.2; }
@keyframes float { 0%, 100% { transform: translate(0, 0); } 33% { transform: translate(30px, -50px); } 66% { transform: translate(-20px, 20px); } }

.ui-btn { position: fixed; top: 12px; width: 44px; height: 44px; border: none; border-radius: 50%; background: var(--glass-card); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); box-shadow: 0 4px 10px rgba(0,0,0,0.1); color: var(--text); font-size: 20px; display: flex; align-items: center; justify-content: center; cursor: pointer; z-index: 3000; transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1); }
.ui-btn:active { transform: scale(0.95); }

.settings-btn { right: 12px; font-size: 18px; }
.settings-btn.active { transform: rotate(180deg) scale(1.1); }
.home-nav-btn { right: 68px; font-size: 18px; display: none; }
.hamburger { left: 12px; flex-direction: column; gap: 5px; }
.hamburger span { width: 20px; height: 2px; background: var(--text); border-radius: 2px; transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); transform-origin: center; }

body.menu-open .hamburger span:nth-child(1) { transform: translateY(7px) rotate(45deg); }
body.menu-open .hamburger span:nth-child(2) { opacity: 0; transform: scale(0); }
body.menu-open .hamburger span:nth-child(3) { transform: translateY(-7px) rotate(-45deg); }

.settings-modal { position: fixed; top: 68px; right: 12px; width: 190px; background: var(--glass-menu); backdrop-filter: blur(30px); -webkit-backdrop-filter: blur(30px); border: 0.5px solid var(--glass-border); border-radius: 18px; padding: 14px; z-index: 4000; display: none; opacity: 0; transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1); box-shadow: var(--shadow); transform: translateY(-10px); }
.settings-modal.active { display: block; opacity: 1; transform: translateY(0); }
.modal-overlay { position: fixed; inset: 0; background: transparent; display: none; z-index: 3500; }
.setting-item { display: flex; justify-content: space-between; align-items: center; margin: 10px 0; }
.setting-item span { font-weight: 600; color: var(--text-sec); font-size: 13px; }

.mini-btn { padding: 6px 14px; font-size: 14px; font-weight: 700; background: var(--glass-input); color: var(--accent); border: none; border-radius: 10px; cursor: pointer; transition: 0.2s; }
.mini-btn:active { transform: scale(0.9); }

.side-menu { position: fixed; top: 0; left: -280px; width: 260px; height: 100%; background: var(--glass-menu); backdrop-filter: blur(30px); -webkit-backdrop-filter: blur(30px); border-right: 0.5px solid var(--glass-border); padding: 80px 20px 20px; box-shadow: 10px 0 40px rgba(0,0,0,0.1); transition: 0.35s cubic-bezier(0.32, 0.72, 0, 1); z-index: 2500; overflow-y: auto; }
#menuList { display: flex; flex-direction: column; }
.side-menu button { width: 100%; padding: 16px 20px; margin-bottom: 10px; border: none; border-radius: 14px; background: transparent; color: var(--accent); font-size: 17px; font-weight: 600; text-align: left; cursor: pointer; transition: background 0.2s; touch-action: none; }

.overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.2); backdrop-filter: blur(5px); display: none; z-index: 2000; }
body.menu-open .side-menu { left: 0; }
body.menu-open .overlay { display: block; }

.section { display: none; width: 100%; height: 100%; padding: 70px 12px 10px; flex-direction: column; align-items: center; overflow-y: auto; }
.section.active { display: flex; }

#home { justify-content: flex-start; padding-top: 100px; }
.greeting { font-size: 28px; font-weight: 700; color: var(--text); margin-bottom: 10px; text-align: center; opacity: 0; animation: fadeIn 1s forwards; }
@keyframes fadeIn { from{opacity:0; transform:translateY(-10px);} to{opacity:1; transform:translateY(0);} }

.clock-wrap { display: flex; flex-direction: column; align-items: center; justify-content: center; margin: 20px 0; }
.ring-clock { position: relative; width: 280px; height: 280px; border-radius: 50%; background: var(--glass-card); backdrop-filter: blur(25px); -webkit-backdrop-filter: blur(25px); box-shadow: var(--shadow); border: 0.5px solid var(--glass-border); display: flex; align-items: center; justify-content: center; }
svg { position: absolute; width: 100%; height: 100%; transform: rotate(-90deg); z-index: 1; }
circle { fill: none; stroke-linecap: round; transition: stroke-dashoffset 0.1s linear; }
.sec { stroke: var(--c-sec); filter: drop-shadow(0 0 6px var(--c-sec)); }
.min { stroke: var(--c-min); }
.hour { stroke: var(--c-hour); }
.digital-wrap { margin-top: 0; text-align: center; z-index: 10; position: relative; }
.digital { font-size: 52px; font-weight: 300; color: var(--text); letter-spacing: -1px; }
.date { font-size: 16px; font-weight: 500; color: var(--text-sec); margin-top: 2px; text-transform: uppercase; }
.bn-date { font-size: 15px; font-weight: 700; color: var(--accent); margin-top: 4px; }

.quick-links { display: flex; gap: 12px; margin-top: 40px; width: 100%; max-width: 320px; justify-content: center; }
.q-card { flex: 1; background: var(--glass-card); border: 0.5px solid var(--glass-border); border-radius: 16px; padding: 12px; text-align: center; cursor: pointer; box-shadow: 0 4px 15px rgba(0,0,0,0.05); transition: 0.2s; display: flex; flex-direction: column; align-items: center; gap: 6px; }
.q-card:active { transform: scale(0.95); }
.q-icon { font-size: 24px; }
.q-name { font-size: 11px; font-weight: 600; color: var(--text-sec); }

.mini-clock { display: flex; gap: 4px; align-items: center; justify-content: center; margin-bottom: 14px; transform: scale(1.1); }
.mc-card { background: var(--glass-input); border: 0.5px solid var(--glass-border); backdrop-filter: blur(12px); padding: 6px 8px; border-radius: 8px; font-size: 18px; font-weight: 700; font-family: 'Courier New', monospace; color: var(--text); box-shadow: 0 4px 10px rgba(0,0,0,0.08); }
.mc-sep { font-size: 18px; color: var(--text-sec); animation: blink 1s infinite; }
.mc-ampm { font-size: 11px; color: var(--text-sec); margin-left: 4px; font-weight: 700; text-transform: uppercase; margin-top: 6px; }
@keyframes blink { 50% { opacity: 0; } }

.app { width: 100%; max-width: 400px; background: var(--glass-card); backdrop-filter: blur(30px); -webkit-backdrop-filter: blur(30px); border: 0.5px solid var(--glass-border); border-radius: 18px; box-shadow: var(--shadow); padding: 16px; display: flex; flex-direction: column; gap: 10px; margin-bottom: 30px; }
.header-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 4px; }
.header-row h2 { margin: 0; font-size: 18px; font-weight: 700; color: var(--text); letter-spacing: -0.5px; }

.btn-group { display: flex; gap: 6px; }
.lang-btn { padding: 6px 12px; font-size: 13px; font-weight: 600; background: var(--glass-input); color: var(--accent); border: none; border-radius: 100px; cursor: pointer; display: flex; align-items: center; gap: 4px; transition: 0.2s; }
.clear-btn { background: rgba(255, 59, 48, 0.1); color: var(--danger); }
.undo-btn { background: rgba(255, 149, 0, 0.1); color: var(--warn); }
.share-btn { background: rgba(0, 122, 255, 0.1); color: var(--accent); }
.voice-btn { background: rgba(52, 199, 89, 0.1); color: #34C759; }

.swap-btn { width: 40px; height: 40px; border-radius: 50%; border: 1px solid var(--glass-border); background: var(--glass-input); color: var(--accent); font-size: 20px; cursor: pointer; flex-shrink: 0; display: flex; align-items: center; justify-content: center; align-self: flex-end; margin-bottom: 4px; transition: 0.2s; }

label { font-size: 11px; font-weight: 600; color: var(--text-sec); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 4px; margin-left: 4px; display: block; }
input, select { width: 100%; height: 42px; padding: 0 12px; background: var(--glass-input); border: none; border-radius: 10px; color: var(--text); font-size: 17px; outline: none; transition: 0.2s; font-family: inherit; }
input:focus, select:focus { background: var(--glass-input); box-shadow: 0 0 0 2px var(--accent); }
input::placeholder { opacity: 0.2; }

.row { display: flex; gap: 10px; }
.row > div { flex: 1; }
.grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
.box { padding: 10px; text-align: center; background: var(--glass-input); border-radius: 12px; }
.box span:first-child { font-size: 11px; color: var(--text-sec); }
.total { display: block; font-size: 18px; font-weight: 700; color: var(--text); margin-top: 2px; }
.box-compact { padding: 6px 8px; border-radius: 10px; }

.info-row { display: flex; justify-content: space-between; align-items: center; padding: 10px 12px; margin-bottom: 6px; background: var(--glass-input); border-radius: 10px; }
.info-label { font-size: 13px; color: var(--text-sec); }
.info-val { font-size: 15px; font-weight: 700; color: var(--text); }
.info-title { font-size: 12px; font-weight: 700; color: var(--accent); text-transform: uppercase; margin: 12px 0 6px; padding-left: 4px; }

.emi-bar-wrap { height: 8px; width: 100%; background: var(--emi-principal); border-radius: 4px; overflow: hidden; margin: 10px 0 4px; display: flex; }
.emi-bar-interest { height: 100%; background: var(--emi-interest); width: 0%; transition: width 0.5s ease; }
.emi-legend { display: flex; justify-content: space-between; font-size: 10px; color: var(--text-sec); }
.dot { display: inline-block; width: 8px; height: 8px; border-radius: 50%; margin-right: 4px; }
.rate-info { font-size: 10px; color: var(--text-sec); text-align: right; margin-top: 4px; }

.footer-credit { position: fixed; bottom: 6px; width: 100%; text-align: center; font-size: 10px; color: var(--text-sec); pointer-events: none; transition: opacity 0.2s; z-index: 100; }
</style>
</head>

<body>
<div class="bg-mesh"></div>
<div class="floater f1"></div><div class="floater f2"></div><div class="floater f3"></div>

<script>
    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    let isMuted = localStorage.getItem('dlc_muted') === 'true';
    function unlockAudio() { if (audioCtx.state === 'suspended') audioCtx.resume(); document.removeEventListener('click', unlockAudio); document.removeEventListener('touchstart', unlockAudio); }
    document.addEventListener('click', unlockAudio); document.addEventListener('touchstart', unlockAudio);
    function playClick() { if(isMuted) return; if(audioCtx.state === 'suspended') audioCtx.resume(); const osc = audioCtx.createOscillator(); const gain = audioCtx.createGain(); osc.connect(gain); gain.connect(audioCtx.destination); osc.frequency.value = 600; osc.type = 'sine'; gain.gain.setValueAtTime(0.05, audioCtx.currentTime); gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.08); osc.start(); osc.stop(audioCtx.currentTime + 0.08); }
    function playTrash() { if(isMuted) return; if(audioCtx.state === 'suspended') audioCtx.resume(); const osc = audioCtx.createOscillator(); const gain = audioCtx.createGain(); osc.connect(gain); gain.connect(audioCtx.destination); osc.frequency.value = 150; osc.type = 'sawtooth'; gain.gain.setValueAtTime(0.05, audioCtx.currentTime); gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.1); osc.start(); osc.stop(audioCtx.currentTime + 0.1); }
    
    function toggleSound() { 
        isMuted = !isMuted; 
        localStorage.setItem('dlc_muted', isMuted); 
        const btn = document.getElementById('settingSoundBtn');
        if(btn) btn.textContent = isMuted ? 'ğŸ”‡ Off' : 'ğŸ”Š On';
        playClick(); 
    }

    function saveUserName() {
        const name = document.getElementById('userNameInput').value;
        localStorage.setItem('dlc_username', name);
        updateClocks();
    }
</script>

<button class="ui-btn settings-btn" id="setBtn" onclick="toggleSettings(); playClick()">âš™ï¸</button>
<button class="ui-btn home-nav-btn" id="homeNavBtn" onclick="showSection('home'); playClick()">ğŸ </button>
<div class="ui-btn hamburger" onclick="toggleMenu(); playClick()"><span></span><span></span><span></span></div>

<div class="modal-overlay" id="modalOverlay" onclick="toggleSettings()"></div>
<div class="settings-modal" id="settingsModal">
  <div class="setting-item">
    <span>Your Name</span>
    <input type="text" id="userNameInput" placeholder="Enter name" oninput="saveUserName()" style="width: 80px; height: 30px; font-size: 11px; text-align: center; border-radius: 8px;">
  </div>
  <div class="setting-item">
    <span>Accent Color</span>
    <input type="color" id="accentPicker" oninput="changeAccent(this.value)" style="width: 40px; height: 30px; border: none; background: transparent; cursor: pointer;">
  </div>
  <div class="setting-item">
    <span>Language</span>
    <button class="mini-btn" onclick="toggleGlobalLang(); playClick()" id="settingLangBtn">ğŸŒ EN</button>
  </div>
  <div class="setting-item">
    <span>Sound</span>
    <button class="mini-btn" onclick="toggleSound();" id="settingSoundBtn">ğŸ”Š On</button>
  </div>
  <div class="setting-item">
    <span>Theme</span>
    <button class="mini-btn" onclick="toggleTheme(); playClick()" id="settingThemeBtn">ğŸŒ™ Dark</button>
  </div>
</div>

<div class="side-menu">
 <div style="font-size:24px; font-weight:700; margin-bottom:20px; padding-left:10px;">Menu</div>
 <div id="menuList">
     <button onclick="onMenuClick('home'); playClick()">Home</button>
     <button onclick="onMenuClick('rate'); playClick()">Price Calculator</button>
     <button onclick="onMenuClick('fuel'); playClick()">Fuel Calculator</button>
     <button onclick="onMenuClick('age'); playClick()">Age Calculator</button>
     <button onclick="onMenuClick('emi'); playClick()">EMI Calculator</button>
     <button onclick="onMenuClick('currency'); playClick()">Currency Converter</button>
     <button onclick="onMenuClick('percent'); playClick()">Percentage</button>
     <button onclick="onMenuClick('converter'); playClick()">Unit Converter</button>
     <button onclick="onMenuClick('cash'); playClick()">Cash Counter</button>
 </div>
</div>
<div class="overlay" onclick="toggleMenu()"></div>

<section id="home" class="section active">
 <div class="greeting" id="greeting">Hello</div>
 <div class="clock-wrap">
  <div class="ring-clock">
   <svg viewBox="0 0 280 280"><circle class="hour" cx="140" cy="140" r="110" stroke-width="12"/><circle class="min" cx="140" cy="140" r="95" stroke-width="12"/><circle class="sec" cx="140" cy="140" r="80" stroke-width="12"/></svg>
   <div class="digital-wrap">
     <div class="digital" id="time">00:00</div>
     <div class="date" id="date">Loading...</div>
     <div class="bn-date" id="bnCalendar">...</div>
   </div>
  </div>
 </div>
 <div class="quick-links">
     <div class="q-card" onclick="showSection('rate'); playClick()"><div class="q-icon">âš–ï¸</div><div class="q-name">Price</div></div>
     <div class="q-card" onclick="showSection('fuel'); playClick()"><div class="q-icon">â›½</div><div class="q-name">Fuel</div></div>
     <div class="q-card" onclick="showSection('age'); playClick()"><div class="q-icon">ğŸ‚</div><div class="q-name">Age</div></div>
 </div>
</section>

<section id="rate" class="section">
 <div class="mini-clock"><div class="mc-card mc-h">12</div><div class="mc-sep">:</div><div class="mc-card mc-m">00</div><div class="mc-sep">:</div><div class="mc-card mc-s" style="color:var(--c-sec)">00</div><div class="mc-ampm">AM</div></div>
 <div class="app">
  <div class="header-row"><h2 id="rateTitle">Price Calculator</h2>
   <div class="btn-group">
    <button class="lang-btn voice-btn" onclick="readResult('rate'); playClick()">ğŸ”Š</button>
    <button class="lang-btn share-btn" onclick="shareAsText('rate'); playClick()">ğŸ“‹</button>
    <button class="lang-btn share-btn" onclick="shareAsImage('rate')">ğŸ“¤</button>
    <button class="lang-btn undo-btn" onclick="undoData('rate'); playClick()">â†©ï¸</button>
    <button class="lang-btn clear-btn" onclick="clearData('rate'); playTrash()">ğŸ—‘ï¸</button>
   </div>
  </div>
  <div><label id="lp">Price per Kg</label><input id="price" type="number" inputmode="decimal" placeholder="0"></div>
  <div class="row"><div><label id="lw">Weight</label><input id="weight" type="number" inputmode="decimal" placeholder="0"></div><div><label id="lu">Unit</label><select id="unit"><option value="g">Gram</option><option value="kg">Kg</option></select></div></div>
  <div class="box box-compact"><span id="lt">Total</span><span class="total" id="total">0.00</span></div>
  <div><label id="la">Pay Amount</label><input id="amount" type="number" inputmode="decimal" placeholder="0"></div>
  <div class="box box-compact"><span id="lg">Result</span><span class="total" id="result">0 g</span></div>
 </div>
</section>

<section id="fuel" class="section">
 <div class="mini-clock"><div class="mc-card mc-h">12</div><div class="mc-sep">:</div><div class="mc-card mc-m">00</div><div class="mc-sep">:</div><div class="mc-card mc-s" style="color:var(--c-sec)">00</div><div class="mc-ampm">AM</div></div>
 <div class="app">
  <div class="header-row"><h2 id="fuelTitle">Fuel Calculator</h2>
   <div class="btn-group">
    <button class="lang-btn voice-btn" onclick="readResult('fuel'); playClick()">ğŸ”Š</button>
    <button class="lang-btn share-btn" onclick="shareAsText('fuel'); playClick()">ğŸ“‹</button>
    <button class="lang-btn share-btn" onclick="shareAsImage('fuel')">ğŸ“¤</button>
    <button class="lang-btn undo-btn" onclick="undoData('fuel'); playClick()">â†©ï¸</button>
    <button class="lang-btn clear-btn" onclick="clearData('fuel'); playTrash()">ğŸ—‘ï¸</button>
   </div>
  </div>
  <div class="row"><div><label id="lblDist">Distance (km)</label><input id="fuelDist" type="number" inputmode="decimal" placeholder="100"></div><div><label id="lblMil">Mileage (km/L)</label><input id="fuelMil" type="number" inputmode="decimal" placeholder="45"></div></div>
  <div class="row"><div><label id="lblFPrice">Price (per L)</label><input id="fuelPrice" type="number" inputmode="decimal" placeholder="100"></div><div><label id="lblSpeed">Speed (km/h)</label><input id="fuelSpeed" type="number" inputmode="decimal" placeholder="60"></div></div>
  <div class="box" style="margin-top:8px; background: rgba(0,122,255,0.1); border: 1px solid rgba(0,122,255,0.2);"><span id="lblFCost">Total Cost</span><span class="total" id="resFCost" style="font-size: 24px; color: var(--accent);">0.00</span></div>
  <div class="grid-2" style="margin-top:8px;"><div class="box"><span id="lblFFuel">Fuel Needed</span><span class="total" id="resFFuel">0 L</span></div><div class="box"><span id="lblFTime">Est. Time</span><span class="total" id="resFTime">0m</span></div></div>
 </div>
</section>

<section id="age" class="section">
 <div class="mini-clock"><div class="mc-card mc-h">12</div><div class="mc-sep">:</div><div class="mc-card mc-m">00</div><div class="mc-sep">:</div><div class="mc-card mc-s" style="color:var(--c-sec)">00</div><div class="mc-ampm">AM</div></div>
 <div class="app">
  <div class="header-row"><h2 id="ageTitle">Age Calculator</h2>
   <div class="btn-group">
    <button class="lang-btn voice-btn" onclick="readResult('age'); playClick()">ğŸ”Š</button>
    <button class="lang-btn share-btn" onclick="shareAsText('age'); playClick()">ğŸ“‹</button>
    <button class="lang-btn share-btn" onclick="shareAsImage('age')">ğŸ“¤</button>
    <button class="lang-btn undo-btn" onclick="undoData('age'); playClick()">â†©ï¸</button>
    <button class="lang-btn clear-btn" onclick="clearData('age'); playTrash()">ğŸ—‘ï¸</button>
   </div>
  </div>
  <div><label id="lblDob">Date of Birth</label><input id="dobInput" type="date"></div>
  <div class="grid-2" style="margin-top:8px;">
    <div class="box"><span id="lblYears">Years</span><span class="total" id="resYears">0</span></div>
    <div class="box"><span id="lblMonths">Months</span><span class="total" id="resMonths">0</span></div>
    <div class="box"><span id="lblDays">Days</span><span class="total" id="resDays">0</span></div>
    <div class="box"><span id="lblNextBday">Next B'day</span><span class="total" id="resNextBday" style="color: #FF9500;">-</span></div>
  </div>
  <div id="funContainer" class="fun-container">
      <div class="info-title" id="lblDetails">Details</div>
      <div class="info-row"><span class="info-label" id="lblBornDay">Born On</span><span class="info-val" id="resBornDay">-</span></div>
      <div class="info-row"><span class="info-label" id="lblZodiac">Zodiac</span><span class="info-val" id="resZodiac">-</span></div>
      <div class="info-title" id="lblLifeStats">Total Life Stats</div>
      <div class="info-row"><span class="info-label" id="lblTotMonths">Total Months</span><span class="info-val" id="resTotMonths">0</span></div>
      <div class="info-row"><span class="info-label" id="lblTotWeeks">Total Weeks</span><span class="info-val" id="resTotWeeks">0</span></div>
      <div class="info-row"><span class="info-label" id="lblTotDays">Total Days</span><span class="info-val" id="resTotDays">0</span></div>
  </div>
 </div>
</section>

<section id="emi" class="section">
 <div class="mini-clock"><div class="mc-card mc-h">12</div><div class="mc-sep">:</div><div class="mc-card mc-m">00</div><div class="mc-sep">:</div><div class="mc-card mc-s" style="color:var(--c-sec)">00</div><div class="mc-ampm">AM</div></div>
 <div class="app">
  <div class="header-row"><h2 id="emiTitle">EMI Calculator</h2>
   <div class="btn-group">
    <button class="lang-btn voice-btn" onclick="readResult('emi'); playClick()">ğŸ”Š</button>
    <button class="lang-btn share-btn" onclick="shareAsText('emi'); playClick()">ğŸ“‹</button>
    <button class="lang-btn share-btn" onclick="shareAsImage('emi')">ğŸ“¤</button>
    <button class="lang-btn undo-btn" onclick="undoData('emi'); playClick()">â†©ï¸</button>
    <button class="lang-btn clear-btn" onclick="clearData('emi'); playTrash()">ğŸ—‘ï¸</button>
   </div>
  </div>
  <div><label id="lblLoan">Loan Amount</label><input id="emiPrincipal" type="number" inputmode="decimal" placeholder="500000"></div>
  <div class="row"><div><label id="lblRate">Interest (%)</label><input id="emiRate" type="number" inputmode="decimal" placeholder="10.5"></div><div><label id="lblYears">Years</label><input id="emiYears" type="number" inputmode="decimal" placeholder="5"></div></div>
  <div class="box" style="background: rgba(0,122,255,0.1); border: 1px solid rgba(0,122,255,0.2);"><span id="lblEmiRes">Monthly EMI</span><span class="total" id="resEmi" style="font-size: 24px; color: var(--accent);">0.00</span></div>
  <div class="emi-bar-wrap"><div id="emiBarInt" class="emi-bar-interest"></div></div>
  <div class="emi-legend"><span><span class="dot" style="background:var(--emi-principal)"></span><span id="txtPrin">Principal</span></span><span><span class="dot" style="background:var(--emi-interest)"></span><span id="txtInt">Interest</span></span></div>
  <div class="grid-2" style="margin-top:8px;"><div class="box"><span id="lblTotalInt">Total Interest</span><span class="total" id="resTotalInt" style="color:var(--emi-interest)">0</span></div><div class="box"><span id="lblTotalPay">Total Payment</span><span class="total" id="resTotalPay">0</span></div></div>
 </div>
</section>

<section id="currency" class="section">
 <div class="mini-clock"><div class="mc-card mc-h">12</div><div class="mc-sep">:</div><div class="mc-card mc-m">00</div><div class="mc-sep">:</div><div class="mc-card mc-s" style="color:var(--c-sec)">00</div><div class="mc-ampm">AM</div></div>
 <div class="app">
  <div class="header-row"><h2 id="curTitle">Currency Converter</h2>
   <div class="btn-group">
    <button class="lang-btn voice-btn" onclick="readResult('currency'); playClick()">ğŸ”Š</button>
    <button class="lang-btn share-btn" onclick="shareAsText('currency'); playClick()">ğŸ“‹</button>
    <button class="lang-btn share-btn" onclick="shareAsImage('currency')">ğŸ“¤</button>
    <button class="lang-btn undo-btn" onclick="undoData('currency'); playClick()">â†©ï¸</button>
    <button class="lang-btn clear-btn" onclick="clearData('currency'); playTrash()">ğŸ—‘ï¸</button>
   </div>
  </div>
  <div><label id="curLblAmount">Amount</label><input id="curAmount" type="number" inputmode="decimal" placeholder="1" value="1"></div>
  <div class="row"><div><label id="curLblFrom">From</label><select id="curFrom" onchange="convertCurrency(); playClick()"></select></div><button class="swap-btn" onclick="swapCurrency(); playClick()">â‡„</button><div><label id="curLblTo">To</label><select id="curTo" onchange="convertCurrency(); playClick()"></select></div></div>
  <div class="box"><span id="curLblResult">Result</span><span class="total" id="curResult">...</span><div class="rate-info" id="curRateInfo">Fetching rates...</div></div>
 </div>
</section>

<section id="percent" class="section">
 <div class="mini-clock"><div class="mc-card mc-h">12</div><div class="mc-sep">:</div><div class="mc-card mc-m">00</div><div class="mc-sep">:</div><div class="mc-card mc-s" style="color:var(--c-sec)">00</div><div class="mc-ampm">AM</div></div>
 <div class="app">
  <div class="header-row"><h2 id="pcTitle">Percent Calculator</h2>
   <div class="btn-group">
    <button class="lang-btn voice-btn" onclick="readResult('percent'); playClick()">ğŸ”Š</button>
    <button class="lang-btn share-btn" onclick="shareAsText('percent'); playClick()">ğŸ“‹</button>
    <button class="lang-btn share-btn" onclick="shareAsImage('percent')">ğŸ“¤</button>
    <button class="lang-btn undo-btn" onclick="undoData('percent'); playClick()">â†©ï¸</button>
    <button class="lang-btn clear-btn" onclick="clearData('percent'); playTrash()">ğŸ—‘ï¸</button>
   </div>
  </div>
  <div><label id="lblType">Mode</label><select id="pcMode" onchange="updatePCLayout(); playClick()"><option value="1">X is what % of Y</option><option value="2">X% of Y</option><option value="3">% Increase/Decrease</option><option value="4">Reverse %</option></select></div>
  <div class="row"><div><label id="pcL1">X Value</label><input id="pcIn1" type="number" inputmode="decimal"></div><div><label id="pcL2">Y Value</label><input id="pcIn2" type="number" inputmode="decimal"></div></div>
  <div class="box"><span id="pcResLabel">Result</span><span class="total" id="pcRes">-</span></div>
 </div>
</section>

<section id="converter" class="section">
 <div class="mini-clock"><div class="mc-card mc-h">12</div><div class="mc-sep">:</div><div class="mc-card mc-m">00</div><div class="mc-sep">:</div><div class="mc-card mc-s" style="color:var(--c-sec)">00</div><div class="mc-ampm">AM</div></div>
 <div class="app">
  <div class="header-row"><h2 id="cvTitle">All-in-One Converter</h2>
   <div class="btn-group">
    <button class="lang-btn voice-btn" onclick="readResult('converter'); playClick()">ğŸ”Š</button>
    <button class="lang-btn share-btn" onclick="shareAsText('converter'); playClick()">ğŸ“‹</button>
    <button class="lang-btn share-btn" onclick="shareAsImage('converter')">ğŸ“¤</button>
    <button class="lang-btn undo-btn" onclick="undoData('converter'); playClick()">â†©ï¸</button>
    <button class="lang-btn clear-btn" onclick="clearData('converter'); playTrash()">ğŸ—‘ï¸</button>
   </div>
  </div>
  <div><label id="cvLblCat">Category</label><select id="cvCat" onchange="updateCvUnits(); playClick()"><option value="len">Length</option><option value="wgt">Weight</option><option value="temp">Temperature</option><option value="time">Time</option><option value="speed">Speed</option><option value="data">Data</option><option value="power">Power</option><option value="land">Indian Land</option></select></div>
  <div class="row"><div style="flex:1.5;"><label id="cvLblFrom">From</label><input id="cvIn" type="number" inputmode="decimal" placeholder="0"></div><div style="flex:1;"><label>&nbsp;</label><select id="cvUnitFrom" onchange="doConvert(); playClick()"></select></div></div>
  <div class="row"><div style="flex:1.5;"><label id="cvLblTo">To</label><input id="cvOut" type="text" readonly style="background:transparent; font-weight:700; border:1px solid var(--glass-border);"></div><div style="flex:1;"><label>&nbsp;</label><select id="cvUnitTo" onchange="doConvert(); playClick()"></select></div></div>
 </div>
</section>

<section id="cash" class="section">
 <div class="mini-clock"><div class="mc-card mc-h">12</div><div class="mc-sep">:</div><div class="mc-card mc-m">00</div><div class="mc-sep">:</div><div class="mc-card mc-s" style="color:var(--c-sec)">00</div><div class="mc-ampm">AM</div></div>
 <div class="app">
  <div class="header-row"><h2 id="cashTitle">Cash Counter</h2>
   <div class="btn-group">
     <button class="lang-btn voice-btn" onclick="readResult('cash'); playClick()">ğŸ”Š</button>
     <button class="lang-btn share-btn" onclick="shareAsText('cash'); playClick()">ğŸ“‹</button>
     <button class="lang-btn share-btn" onclick="shareAsImage('cash')">ğŸ“¤</button>
     <button class="lang-btn undo-btn" onclick="undoData('cash'); playClick()">â†©ï¸</button>
     <button class="lang-btn clear-btn" onclick="clearCash(); playTrash()">ğŸ—‘ï¸</button>
   </div>
  </div>
  <div id="cashList" style="display: flex; flex-direction: column; gap: 8px; margin-bottom: 15px;"></div>
  <div class="box" style="background: rgba(52, 199, 89, 0.1); border: 1px solid rgba(52, 199, 89, 0.2);">
    <span id="lblCashTotal">Grand Total</span>
    <span class="total" id="resCashTotal" style="font-size: 26px; color: #34C759;">â‚¹ 0</span>
  </div>
  <div class="rate-info" id="cashInWords" style="text-align: center; margin-top: 8px; font-weight: 600;">Zero Rupees Only</div>
 </div>
</section>

<div class="footer-credit">Made with â¤ï¸ by Aditya</div>

<script>
/* CORE LOGIC & UPDATES */

// à§§. à¦à¦•à§à¦¸à§‡à¦¨à§à¦Ÿ à¦•à¦¾à¦²à¦¾à¦° à¦ªà¦°à¦¿à¦¬à¦°à§à¦¤à¦¨à§‡à¦° à¦«à¦¾à¦‚à¦¶à¦¨
function changeAccent(color) {
    document.documentElement.style.setProperty('--accent', color);
    localStorage.setItem('dlc_accent', color);
}

// à§¨. à¦‡à¦®à§‡à¦œ à¦¹à¦¿à¦¸à§‡à¦¬à§‡ à¦¶à§‡à§Ÿà¦¾à¦° à¦•à¦°à¦¾à¦° à¦«à¦¾à¦‚à¦¶à¦¨
async function shareAsImage(secId) {
    playClick();
    const section = document.querySelector(`#${secId} .app`);
    
    const options = {
        backgroundColor: document.body.classList.contains('dark') ? '#1e1e1e' : '#f2f2f7',
        scale: 2, 
        borderRadius: 18,
        useCORS: true,
        logging: false
    };

    try {
        const canvas = await html2canvas(section, options);
        canvas.toBlob(async (blob) => {
            const file = new File([blob], 'calculation_result.png', { type: 'image/png' });
            
            if (navigator.share && navigator.canShare && navigator.canShare({ files: [file] })) {
                await navigator.share({
                    files: [file],
                    title: 'Calculator Result',
                    text: 'Daily Life App à¦¥à§‡à¦•à§‡ à¦¶à§‡à§Ÿà¦¾à¦° à¦•à¦°à¦¾ à¦¹à§Ÿà§‡à¦›à§‡à¥¤'
                });
            } else {
                const link = document.createElement('a');
                link.download = 'result.png';
                link.href = URL.createObjectURL(blob);
                link.click();
            }
        });
    } catch (err) {
        console.error("Image generation failed", err);
    }
}

// à§©. à¦Ÿà§‡à¦•à§à¦¸à¦Ÿ à¦¹à¦¿à¦¸à§‡à¦¬à§‡ à¦¶à§‡à§Ÿà¦¾à¦° à¦•à¦°à¦¾à¦° à¦«à¦¾à¦‚à¦¶à¦¨
async function shareAsText(secId) {
    let resultText = "";
    const title = document.getElementById(secId + 'Title').innerText;
    
    if (secId === 'rate') {
        const t = document.getElementById('total').innerText;
        const r = document.getElementById('result').innerText;
        resultText = isEn ? `${title}\nTotal Price: ${t}\nYou will get: ${r}` : `${title}\nà¦®à§‹à¦Ÿ à¦¦à¦¾à¦®: ${t}\nà¦†à¦ªà¦¨à¦¿ à¦ªà¦¾à¦¬à§‡à¦¨: ${r}`;
    } else if (secId === 'fuel') {
        const cost = document.getElementById('resFCost').innerText;
        const fuel = document.getElementById('resFFuel').innerText;
        resultText = isEn ? `${title}\nTotal Cost: â‚¹${cost}\nFuel Needed: ${fuel}` : `${title}\nà¦®à§‹à¦Ÿ à¦–à¦°à¦š: â‚¹${cost}\nà¦¤à§‡à¦² à¦²à¦¾à¦—à¦¬à§‡: ${fuel}`;
    } else if (secId === 'age') {
        const y = document.getElementById('resYears').innerText;
        const m = document.getElementById('resMonths').innerText;
        const d = document.getElementById('resDays').innerText;
        resultText = isEn ? `${title}\nYour Age: ${y} Years, ${m} Months, ${d} Days` : `${title}\nà¦†à¦ªà¦¨à¦¾à¦° à¦¬à§Ÿà¦¸: ${y} à¦¬à¦›à¦°, ${m} à¦®à¦¾à¦¸, ${d} à¦¦à¦¿à¦¨`;
    } else if (secId === 'emi') {
        const emi = document.getElementById('resEmi').innerText;
        const total = document.getElementById('resTotalPay').innerText;
        resultText = isEn ? `${title}\nMonthly EMI: ${emi}\nTotal Payment: ${total}` : `${title}\nà¦®à¦¾à¦¸à¦¿à¦• à¦•à¦¿à¦¸à§à¦¤à¦¿: ${emi}\nà¦¸à¦°à§à¦¬à¦®à§‹à¦Ÿ à¦ªà¦°à¦¿à¦¶à§‹à¦§: ${total}`;
    } else if (secId === 'currency') {
        const res = document.getElementById('curResult').innerText;
        resultText = isEn ? `${title}\nConverted Amount: ${res}` : `${title}\nà¦°à§‚à¦ªà¦¾à¦¨à§à¦¤à¦°à¦¿à¦¤ à¦ªà¦°à¦¿à¦®à¦¾à¦£: ${res}`;
    } else if (secId === 'percent') {
        const res = document.getElementById('pcRes').innerText;
        resultText = isEn ? `${title}\nResult: ${res}` : `${title}\nà¦«à¦²à¦¾à¦«à¦²: ${res}`;
    } else if (secId === 'converter') {
        const res = document.getElementById('cvOut').value;
        const unit = document.getElementById('cvUnitTo').value;
        resultText = isEn ? `${title}\nResult: ${res} ${unit}` : `${title}\nà¦«à¦²à¦¾à¦«à¦²: ${res} ${unit}`;
    } else if (secId === 'cash') {
        const total = document.getElementById('resCashTotal').innerText;
        const words = document.getElementById('cashInWords').innerText;
        resultText = isEn ? `${title}\nTotal Cash: ${total}\n${words}` : `${title}\nà¦®à§‹à¦Ÿ à¦¨à¦—à¦¦: ${total}\n${words}`;
    }

    const finalMsg = `${resultText}\n\nShared via Daily Life Calculator App ğŸ“±`;

    if (navigator.share) {
        try {
            await navigator.share({
                title: title,
                text: finalMsg
            });
        } catch (err) {
            console.log("Sharing cancelled");
        }
    } else {
        // à¦«à¦²à¦¬à§à¦¯à¦¾à¦•: à¦•à§à¦²à¦¿à¦ªà¦¬à§‹à¦°à§à¦¡à§‡ à¦•à¦ªà¦¿ à¦•à¦°à¦¾
        navigator.clipboard.writeText(finalMsg);
        alert(isEn ? "Result copied to clipboard!" : "à¦«à¦²à¦¾à¦«à¦² à¦•à¦ªà¦¿ à¦•à¦°à¦¾ à¦¹à§Ÿà§‡à¦›à§‡!");
    }
}

/* BENGALI CALENDAR CALCULATION */
function getBengaliCalendarDate(date) {
    const months = ["à¦¬à§ˆà¦¶à¦¾à¦–", "à¦œà§à¦¯à§ˆà¦·à§à¦ ", "à¦†à¦·à¦¾à¦¢à¦¼", "à¦¶à§à¦°à¦¾à¦¬à¦£", "à¦­à¦¾à¦¦à§à¦°", "à¦†à¦¶à§à¦¬à¦¿à¦¨", "à¦•à¦¾à¦°à§à¦¤à¦¿à¦•", "à¦…à¦—à§à¦°à¦¹à¦¾à¦¯à¦¼à¦£", "à¦ªà§Œà¦·", "à¦®à¦¾à¦˜", "à¦«à¦¾à¦²à§à¦—à§à¦¨", "à¦šà§ˆà¦¤à§à¦°"];
    const numbers = ["à§¦", "à§§", "à§¨", "à§©", "à§ª", "à§«", "à§¬", "à§­", "à§®", "à§¯"];
    let day = date.getDate();
    let month = date.getMonth();
    let year = date.getFullYear();
    let bnYear = year - 593;
    let bnMonth, bnDay;
    if (month === 0) { 
        if (day >= 15) { bnDay = day - 14; bnMonth = "à¦®à¦¾à¦˜"; bnYear = year - 594; } 
        else { bnDay = day + 16; bnMonth = "à¦ªà§Œà¦·"; bnYear = year - 594; }
    } else if (month === 1) { 
        if (day >= 14) { bnDay = day - 13; bnMonth = "à¦«à¦¾à¦²à§à¦—à§à¦¨"; bnYear = year - 594; } 
        else { bnDay = day + 17; bnMonth = "à¦®à¦¾à¦˜"; bnYear = year - 594; }
    } else { bnDay = day; bnMonth = months[month]; bnYear = year - 593; }
    const toBnNum = (n) => n.toString().split('').map(d => numbers[d]).join('');
    return `${toBnNum(bnDay)} ${bnMonth}, ${toBnNum(bnYear)} (à¦¬à¦™à§à¦—à¦¾à¦¬à§à¦¦)`;
}

/* CORE SYSTEM */
function toggleSettings() {
    const modal = document.getElementById('settingsModal');
    const overlay = document.getElementById('modalOverlay');
    const btn = document.getElementById('setBtn');
    const active = modal.classList.toggle('active');
    btn.classList.toggle('active'); 
    overlay.style.display = active ? 'block' : 'none';
}

function toggleGlobalLang() {
    isEn = !isEn;
    saveLang();
    const btn = document.getElementById('settingLangBtn');
    if(btn) btn.textContent = isEn ? 'ğŸŒ EN' : 'ğŸŒ BN';
    renderAllLangs();
}

function applyTheme(isDark) { 
    if(isDark) { 
        document.body.classList.add('dark'); 
        const btn = document.getElementById('settingThemeBtn');
        if(btn) btn.textContent = 'â˜€ï¸ Light'; 
    } else { 
        document.body.classList.remove('dark'); 
        const btn = document.getElementById('settingThemeBtn');
        if(btn) btn.textContent = 'ğŸŒ™ Dark'; 
    } 
}
const systemDark = window.matchMedia('(prefers-color-scheme: dark)');
applyTheme(systemDark.matches);

function toggleTheme() { applyTheme(!document.body.classList.contains('dark')); }
let isEn = localStorage.getItem('lang') !== 'bn'; 

function toggleMenu(){ document.body.classList.toggle('menu-open'); }

function showSection(id){ 
    document.querySelectorAll('.section').forEach(s=>s.classList.remove('active')); 
    document.getElementById(id).classList.add('active'); 
    document.getElementById('homeNavBtn').style.display = (id === 'home') ? 'none' : 'flex';
}
function onMenuClick(id){ showSection(id); toggleMenu(); }

document.querySelectorAll('input, select').forEach(el => { el.addEventListener('click', playClick); el.addEventListener('focus', playClick); });
function toBn(num) { if(isEn) return num; const digits = ['à§¦','à§§','à§¨','à§©','à§ª','à§«','à§¬','à§­','à§®','à§¯']; return num.toString().split('').map(d => digits[d]||d).join(''); }
function saveLang(){ localStorage.setItem('lang',isEn?'en':'bn'); }

const inputs = document.querySelectorAll('input, select');
const footer = document.querySelector('.footer-credit');
inputs.forEach(input => {
    input.addEventListener('focus', () => footer.style.opacity = '0');
    input.addEventListener('blur', () => footer.style.opacity = '1');
});

window.addEventListener('load', () => {
    if(document.getElementById('settingSoundBtn')) document.getElementById('settingSoundBtn').textContent = isMuted ? 'ğŸ”‡ Off' : 'ğŸ”Š On';
    if(document.getElementById('settingLangBtn')) document.getElementById('settingLangBtn').textContent = isEn ? 'ğŸŒ EN' : 'ğŸŒ BN';
    const savedName = localStorage.getItem('dlc_username');
    if(savedName) document.getElementById('userNameInput').value = savedName;
    
    const savedAccent = localStorage.getItem('dlc_accent');
    if (savedAccent) {
        changeAccent(savedAccent);
        document.getElementById('accentPicker').value = savedAccent;
    }
});

/* VOICE READOUT LOGIC */
function readResult(secId) {
    let text = "";
    if (secId === 'rate') {
        const res = document.getElementById('result').innerText;
        text = isEn ? `You will get ${res}` : `à¦†à¦ªà¦¨à¦¿ à¦ªà¦¾à¦¬à§‡à¦¨ ${res}`;
    } else if (secId === 'fuel') {
        const cost = document.getElementById('resFCost').innerText;
        text = isEn ? `Total cost is ${cost}` : `à¦®à§‹à¦Ÿ à¦–à¦°à¦š ${cost} à¦Ÿà¦¾à¦•à¦¾`;
    } else if (secId === 'age') {
        const y = document.getElementById('resYears').innerText;
        const m = document.getElementById('resMonths').innerText;
        text = isEn ? `Your age is ${y} years and ${m} months` : `à¦†à¦ªà¦¨à¦¾à¦° à¦¬à¦¯à¦¼à¦¸ ${y} à¦¬à¦›à¦° ${m} à¦®à¦¾à¦¸`;
    } else if (secId === 'emi') {
        const emi = document.getElementById('resEmi').innerText;
        text = isEn ? `Monthly EMI is ${emi}` : `à¦®à¦¾à¦¸à¦¿à¦• à¦•à¦¿à¦¸à§à¦¤à¦¿ ${emi} à¦Ÿà¦¾à¦•à¦¾`;
    } else if (secId === 'cash') {
        const total = document.getElementById('resCashTotal').innerText;
        text = isEn ? `Total cash is ${total}` : `à¦®à§‹à¦Ÿ à¦¨à¦—à¦¦ à¦Ÿà¦¾à¦•à¦¾ à¦¹à¦²à§‹ ${total}`;
    } else if (secId === 'currency') {
        const res = document.getElementById('curResult').innerText;
        text = isEn ? `Converted result is ${res}` : `à¦«à¦²à¦¾à¦«à¦² à¦¹à¦²à§‹ ${res}`;
    } else if (secId === 'percent') {
        const res = document.getElementById('pcRes').innerText;
        text = isEn ? `The result is ${res}` : `à¦«à¦²à¦¾à¦«à¦² à¦¹à¦²à§‹ ${res}`;
    } else if (secId === 'converter') {
        const res = document.getElementById('cvOut').value;
        text = isEn ? `Result is ${res}` : `à¦«à¦²à¦¾à¦«à¦² à¦¹à¦²à§‹ ${res}`;
    }

    if (!text) return;
    const utterance = new SpeechSynthesisUtterance(text);
    utterance.lang = isEn ? 'en-US' : 'bn-BD';
    utterance.rate = 1.0;
    window.speechSynthesis.speak(utterance);
}

/* CLOCK SYSTEM */
const circles={hour:document.querySelector('.hour'),min:document.querySelector('.min'),sec:document.querySelector('.sec')};
Object.values(circles).forEach(c=>{ const r = c.r.baseVal.value; c.len = 2 * Math.PI * r; c.style.strokeDasharray = c.len; });

function updateClocks(){
    const d=new Date();
    const hRaw = d.getHours();
    const savedName = localStorage.getItem('dlc_username') || "";
    let greet = "";
    if(hRaw >= 5 && hRaw < 12) greet = isEn ? "Good Morning" : "à¦¶à§à¦­ à¦¸à¦•à¦¾à¦²";
    else if(hRaw >= 12 && hRaw < 17) greet = isEn ? "Good Afternoon" : "à¦¶à§à¦­ à¦¦à§à¦ªà§à¦°";
    else if(hRaw >= 17 && hRaw < 21) greet = isEn ? "Good Evening" : "à¦¶à§à¦­ à¦¸à¦¨à§à¦§à§à¦¯à¦¾";
    else greet = isEn ? "Good Night" : "à¦¶à§à¦­ à¦°à¦¾à¦¤à§à¦°à¦¿";
    document.getElementById('greeting').textContent = savedName ? `${greet}, ${savedName}` : greet;
    const h=hRaw%12, m=d.getMinutes(), s=d.getSeconds();
    circles.sec.style.strokeDashoffset = circles.sec.len - (s/60)*circles.sec.len;
    circles.min.style.strokeDashoffset = circles.min.len - ((m+s/60)/60)*circles.min.len;
    circles.hour.style.strokeDashoffset = circles.hour.len - ((h+m/60)/12)*circles.hour.len;
    document.getElementById('time').textContent = d.toLocaleTimeString([],{hour:'2-digit',minute:'2-digit',hour12:true});
    document.getElementById('date').textContent = d.toLocaleDateString('en-IN',{weekday:'long',day:'numeric',month:'short'});
    document.getElementById('bnCalendar').textContent = getBengaliCalendarDate(d);
    const session = hRaw >= 12 ? "PM" : "AM";
    let h12 = hRaw % 12; h12 = h12 ? h12 : 12; 
    const hh = h12.toString().padStart(2, '0');
    const mm = m.toString().padStart(2, '0');
    const ss = s.toString().padStart(2, '0');
    document.querySelectorAll('.mini-clock').forEach(mc => {
        mc.querySelector('.mc-h').textContent = hh; mc.querySelector('.mc-m').textContent = mm;
        mc.querySelector('.mc-s').textContent = ss; mc.querySelector('.mc-ampm').textContent = session;
    });
}
setInterval(updateClocks,1000); updateClocks();

const menuListEl = document.getElementById('menuList');
Sortable.create(menuListEl, {
    animation: 250, delay: 150, delayOnTouchOnly: true,
    onEnd: function () {
        const order = Array.from(menuListEl.children).map(btn => btn.innerText);
        localStorage.setItem('dlc_menu_order', JSON.stringify(order));
    }
});

/* CALCULATORS LOGIC */
function renderRateLang(){ rateTitle.textContent=isEn?'Price Calculator':'à¦®à§‚à¦²à§à¦¯ à¦•à§à¦¯à¦¾à¦²à¦•à§à¦²à§‡à¦Ÿà¦°'; lp.textContent=isEn?'Price per Kg':'à¦ªà§à¦°à¦¤à¦¿ à¦•à§‡à¦œà¦¿ à¦®à§‚à¦²à§à¦¯'; lw.textContent=isEn?'Weight':'à¦“à¦œà¦¨'; lu.textContent=isEn?'Unit':'à¦à¦•à¦•'; lt.textContent=isEn?'Total':'à¦®à§‹à¦Ÿ à¦¦à¦¾à¦®'; la.textContent=isEn?'Pay Amount':'à¦†à¦®à¦¿ à¦¦à¦¿à¦¤à§‡ à¦šà¦¾à¦‡'; lg.textContent=isEn?'Result':'à¦†à¦ªà¦¨à¦¿ à¦ªà¦¾à¦¬à§‡à¦¨'; calc(); }
function calc(){ let p=+price.value||0, w=+weight.value||0; if(unit.value==='g')w/=1000; total.textContent="â‚¹ "+(p*w).toFixed(2); let a=+amount.value||0; if(p>0){ let g=(a/p)*1000; result.textContent=g>=1000?(g/1000).toFixed(2)+(isEn?' Kg':' à¦•à§‡à¦œà¦¿'):Math.round(g)+(isEn?' g':' à¦—à§à¦°à¦¾à¦®'); } }
['input','change'].forEach(e=>{ price.addEventListener(e,calc); weight.addEventListener(e,calc); unit.addEventListener(e,calc); amount.addEventListener(e,calc); });

function renderAgeLang(){ ageTitle.textContent=isEn?'Age Calculator':'à¦¬à§Ÿà¦¸ à¦•à§à¦¯à¦¾à¦²à¦•à§à¦²à§‡à¦Ÿà¦°'; lblDob.textContent=isEn?'Date of Birth':'à¦œà¦¨à§à¦® à¦¤à¦¾à¦°à¦¿à¦–'; lblYears.textContent=isEn?'Years':'à¦¬à¦›à¦°'; lblMonths.textContent=isEn?'Months':'à¦®à¦¾à¦¸'; lblDays.textContent=isEn?'Days':'à¦¦à¦¿à¦¨'; lblNextBday.textContent=isEn?'Next B\'day':'à¦ªà¦°à¦¬à¦°à§à¦¤à§€ à¦œà¦¨à§à¦®à¦¦à¦¿à¦¨'; lblDetails.textContent=isEn?'Details':'à¦¬à¦¿à¦¸à§à¦¤à¦¾à¦°à¦¿à¦¤'; lblBornDay.textContent=isEn?'Born On':'à¦œà¦¨à§à¦®à¦¬à¦¾à¦°'; lblZodiac.textContent=isEn?'Zodiac':'à¦°à¦¾à¦¶à¦¿'; lblLifeStats.textContent=isEn?'Life Statistics':'à¦œà§€à¦¬à¦¨ à¦ªà¦°à¦¿à¦¸à¦‚à¦–à§à¦¯à¦¾à¦¨'; lblTotMonths.textContent=isEn?'Total Months':'à¦®à§‹à¦Ÿ à¦®à¦¾à¦¸'; lblTotWeeks.textContent=isEn?'Total Weeks':'à¦®à§‹à¦Ÿ à¦¸à¦ªà§à¦¤à¦¾à¦¹'; lblTotDays.textContent=isEn?'Total Days':'à¦®à§‹à¦Ÿ à¦¦à¦¿à¦¨'; doAgeCalc(); }
function getZodiac(d,m){ const signs=["Capricorn","Aquarius","Pisces","Aries","Taurus","Gemini","Cancer","Leo","Virgo","Libra","Scorpio","Sagittarius"]; const bnSigns=["à¦®à¦•à¦°","à¦•à§à¦®à§à¦­","à¦®à§€à¦¨","à¦®à§‡à¦·","à¦¬à§ƒà¦·","à¦®à¦¿à¦¥à§à¦¨","à¦•à¦°à¦•à¦à¦Ÿ","à¦¸à¦¿à¦‚à¦¹","à¦•à¦¨à§à¦¯à¦¾","à¦¤à§à¦²à¦¾","à¦¬à§ƒà¦¶à§à¦šà¦¿à¦•","à¦§à¦¨à§"]; const days=[20,19,21,20,21,21,23,23,23,23,22,22]; let i=m; if(d<days[m])i=m-1; if(i<0)i=11; return isEn?signs[i]:bnSigns[i]; }
function doAgeCalc(){ const v=dobInput.value, funDiv=document.getElementById('funContainer'); if(!v){ funDiv.style.display="none"; return; } const b=new Date(v), n=new Date(); n.setHours(0,0,0,0); b.setHours(0,0,0,0); if(b > n){ resYears.textContent="-"; resMonths.textContent="-"; resDays.textContent="-"; funDiv.style.display="none"; return; } let years = n.getFullYear() - b.getFullYear(); let months = n.getMonth() - b.getMonth(); let days = n.getDate() - b.getDate(); if(days < 0){ months--; days += new Date(n.getFullYear(), n.getMonth(), 0).getDate(); } if(months < 0){ years--; months += 12; } resYears.textContent=toBn(years); resMonths.textContent=toBn(months); resDays.textContent=toBn(days); const currentYear = n.getFullYear(); let nextBday = new Date(currentYear, b.getMonth(), b.getDate()); if(nextBday < n) nextBday.setFullYear(currentYear + 1); const diffTime = Math.abs(nextBday - n); const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24)); if(diffDays === 0) resNextBday.textContent=isEn?"Today!":"à¦†à¦œ!"; else resNextBday.textContent = toBn(diffDays) + (isEn?" Days":" à¦¦à¦¿à¦¨"); funDiv.style.display="block"; const dayNames = isEn ? ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'] : ['à¦°à¦¬à¦¿à¦¬à¦¾à¦°','à¦¸à§‹à¦®à¦¬à¦¾à¦°','à¦®à¦™à§à¦—à¦²à¦¬à¦¾à¦°','à¦¬à§à¦§à¦¬à¦¾à¦°','à¦¬à§ƒà¦¹à¦¸à§à¦ªà¦¤à¦¿à¦¬à¦¾à¦°','à¦¶à§à¦•à§à¦°à¦¬à¦¾à¦°','à¦¶à¦¨à¦¿à¦¬à¦¾à¦°']; resBornDay.textContent = dayNames[b.getDay()]; resZodiac.textContent = getZodiac(b.getDate(), b.getMonth()); const totalDiff = n - b; const totalDays = Math.floor(totalDiff / (1000 * 60 * 60 * 24)); const totalWeeks = Math.floor(totalDays / 7); const totalMonths = (years * 12) + months; const fmt = new Intl.NumberFormat(isEn?'en-IN':'bn-IN'); resTotMonths.textContent = toBn(fmt.format(totalMonths)); resTotWeeks.textContent = toBn(fmt.format(totalWeeks)); resTotDays.textContent = toBn(fmt.format(totalDays)); }
dobInput.addEventListener('input',doAgeCalc);

function renderFuelLang(){ fuelTitle.textContent=isEn?'Fuel Calculator':'à¦¤à§‡à¦²à§‡à¦° à¦¹à¦¿à¦¸à¦¾à¦¬'; lblDist.textContent=isEn?'Distance (km)':'à¦¦à§‚à¦°à¦¤à§à¦¬ (à¦•à¦¿à¦®à¦¿)'; lblMil.textContent=isEn?'Mileage (km/L)':'à¦®à¦¾à¦‡à¦²à§‡à¦œ (à¦•à¦¿à¦®à¦¿/à¦²à¦¿à¦Ÿà¦¾à¦°)'; lblFPrice.textContent=isEn?'Price (per L)':'à¦¤à§‡à¦²à§‡à¦° à¦¦à¦¾à¦® (à¦ªà§à¦°à¦¤à¦¿ à¦²à¦¿à¦Ÿà¦¾à¦°)'; lblSpeed.textContent=isEn?'Avg Speed (km/h)':'à¦—à§œ à¦—à¦¤à¦¿ (à¦•à¦¿à¦®à¦¿/à¦˜à¦£à§à¦Ÿà¦¾)'; lblFCost.textContent=isEn?'Total Cost':'à¦®à§‹à¦Ÿ à¦–à¦°à¦š'; lblFFuel.textContent=isEn?'Fuel Needed':'à¦¤à§‡à¦² à¦²à¦¾à¦—à¦¬à§‡'; lblFTime.textContent=isEn?'Est. Time':'à¦¸à¦®à§Ÿ à¦²à¦¾à¦—à¦¬à§‡'; doFuelCalc(); }
function doFuelCalc(){ const d=parseFloat(fuelDist.value)||0, m=parseFloat(fuelMil.value)||0, p=parseFloat(fuelPrice.value)||0, s=parseFloat(fuelSpeed.value)||0; if(d===0||m===0){ resFCost.textContent="0.00"; resFFuel.textContent="-"; resFTime.textContent="-"; return; } const fuelNeeded=d/m, totalCost=fuelNeeded*p; let timeStr="-"; if(s>0){ const timeH=d/s, hrs=Math.floor(timeH), mins=Math.round((timeH-hrs)*60); timeStr=isEn?`${hrs}h ${mins}m`:`${toBn(hrs)}à¦˜ ${toBn(mins)}à¦®à¦¿`; } const fmt=new Intl.NumberFormat(isEn?'en-IN':'bn-IN',{maximumFractionDigits:2}); resFCost.textContent=toBn(fmt.format(totalCost)); resFFuel.textContent=toBn(fuelNeeded.toFixed(2))+(isEn?" L":" à¦²à¦¿à¦Ÿà¦¾à¦°"); resFTime.textContent=timeStr; }
['input'].forEach(e=> { fuelDist.addEventListener(e, doFuelCalc); fuelMil.addEventListener(e, doFuelCalc); fuelPrice.addEventListener(e, doFuelCalc); fuelSpeed.addEventListener(e, doFuelCalc); });

function renderEmiLang(){ emiTitle.textContent=isEn?'EMI Calculator':'EMI à¦•à§à¦¯à¦¾à¦²à¦•à§à¦²à§‡à¦Ÿà¦°'; lblLoan.textContent=isEn?'Loan Amount':'à¦‹à¦£à§‡à¦° à¦ªà¦°à¦¿à¦®à¦¾à¦£'; lblRate.textContent=isEn?'Interest Rate (%)':'à¦¸à§à¦¦à§‡à¦° à¦¹à¦¾à¦° (%)'; lblYears.textContent=isEn?'Tenure (Years)':'à¦¸à¦®à¦¯à¦¼à¦¸à§€à¦®à¦¾ (à¦¬à¦›à¦°)'; lblEmiRes.textContent=isEn?'Monthly EMI':'à¦®à¦¾à¦¸à¦¿à¦• à¦•à¦¿à¦¸à§à¦¤à¦¿ (EMI)'; lblTotalInt.textContent=isEn?'Total Interest':'à¦®à§‹à¦Ÿ à¦¸à§à¦¦'; lblTotalPay.textContent=isEn?'Total Payment':'à¦®à§‹à¦Ÿ à¦ªà¦°à¦¿à¦¶à§‹à¦§'; txtPrin.textContent=isEn?'Principal':'à¦†à¦¸à¦²'; txtInt.textContent=isEn?'Interest':'à¦¸à§à¦¦'; doEmiCalc(); }
function doEmiCalc(){ const P=parseFloat(emiPrincipal.value)||0, R=parseFloat(emiRate.value)||0, N=parseFloat(emiYears.value)||0; if(P===0||R===0||N===0){ resEmi.textContent="0.00"; resTotalInt.textContent="0"; resTotalPay.textContent="0"; document.getElementById('emiBarInt').style.width="0%"; return; } const r=R/12/100, n=N*12; const emi=(P*r*Math.pow(1+r,n))/(Math.pow(1+r,n)-1); const totalPay=emi*n, totalInt=totalPay-P; const fmt=new Intl.NumberFormat(isEn?'en-IN':'bn-IN',{maximumFractionDigits:0}); resEmi.textContent=toBn(emi.toFixed(2)); resTotalInt.textContent=toBn(fmt.format(totalInt)); resTotalPay.textContent=toBn(fmt.format(totalPay)); const intPerc=(totalInt/totalPay)*100; document.getElementById('emiBarInt').style.width=intPerc+"%"; }
['input'].forEach(e=> { emiPrincipal.addEventListener(e,doEmiCalc); emiRate.addEventListener(e,doEmiCalc); emiYears.addEventListener(e,doEmiCalc); });

const currencyList = [{code:"USD",en:"USA Dollar",bn:"à¦†à¦®à§‡à¦°à¦¿à¦•à¦¾à¦¨ à¦¡à¦²à¦¾à¦°"},{code:"BDT",en:"Bangladeshi Taka",bn:"à¦¬à¦¾à¦‚à¦²à¦¾à¦¦à§‡à¦¶à§€ à¦Ÿà¦¾à¦•à¦¾"},{code:"INR",en:"Indian Rupee",bn:"à¦­à¦¾à¦°à¦¤à§€à¦¯à¦¼ à¦°à§à¦ªà¦¿"},{code:"EUR",en:"Euro",bn:"à¦‡à¦‰à¦°à§‹"},{code:"GBP",en:"UK Pound",bn:"à¦¬à§à¦°à¦¿à¦Ÿà¦¿à¦¶ à¦ªà¦¾à¦‰à¦¨à§à¦¡"},{code:"AED",en:"UAE Dirham",bn:"à¦¦à§à¦¬à¦¾à¦‡ à¦¦à¦¿à¦°à¦¹à¦¾à¦®"},{code:"SAR",en:"Saudi Riyal",bn:"à¦¸à§Œà¦¦à¦¿ à¦°à¦¿à¦¯à¦¼à¦¾à¦²"},{code:"KWD",en:"Kuwaiti Dinar",bn:"à¦•à§à¦¯à¦¼à§‡à¦¤à¦¿ à¦¦à¦¿à¦¨à¦¾à¦°"},{code:"MYR",en:"Malaysian Ringgit",bn:"à¦®à¦¾à¦²à¦¯à¦¼à§‡à¦¶à¦¿à¦¯à¦¼à¦¾à¦¨ à¦°à¦¿à¦™à§à¦—à¦¿à¦¤"},{code:"CAD",en:"Canadian Dollar",bn:"à¦•à¦¾à¦¨à¦¾à¦¡à¦¿à¦¯à¦¼à¦¾à¦¨ à¦¡à¦²à¦¾à¦°"},{code:"AUD",en:"Australian Dollar",bn:"à¦…à¦¸à§à¦Ÿà§à¦°à§‡à¦²à¦¿à¦¯à¦¼à¦¾à¦¨ à¦¡à¦²à¦¾à¦°"},{code:"SGD",en:"Singapore Dollar",bn:"à¦¸à¦¿à¦™à§à¦—à¦¾à¦ªà§à¦° à¦¡à¦²à¦¾à¦°"},{code:"JPY",en:"Japanese Yen",bn:"à¦œà¦¾à¦ªà¦¾à¦¨à¦¿ à¦‡à¦¯à¦¼à§‡à¦¨"},{code:"CNY",en:"Chinese Yuan",bn:"à¦šà¦¾à¦‡à¦¨à¦¿à¦œ à¦‡à¦‰à¦¯à¦¼à¦¾à¦¨"},{code:"PKR",en:"Pakistani Rupee",bn:"à¦ªà¦¾à¦•à¦¿à¦¸à§à¦¤à¦¾à¦¨à¦¿ à¦°à§à¦ªà¦¿"}];
let exchangeRates={}, lastFetch=0;
function renderCurrencyLang(){ curTitle.textContent=isEn?'Currency Converter':'à¦•à¦¾à¦°à§‡à¦¨à§à¦¸à¦¿ à¦•à¦¨à¦­à¦¾à¦°à§à¦Ÿà¦¾à¦°'; curLblAmount.textContent=isEn?'Amount':'à¦ªà¦°à¦¿à¦®à¦¾à¦£'; curLblFrom.textContent=isEn?'From':'à¦¥à§‡à¦•à§‡'; curLblTo.textContent=isEn?'To':'à¦¤à§‡'; curLblResult.textContent=isEn?'Result':'à¦«à¦²à¦¾à¦«à¦²'; populateCurrencySelects(true); }
function populateCurrencySelects(k=false){ const f=curFrom.value, t=curTo.value; curFrom.innerHTML=""; curTo.innerHTML=""; currencyList.forEach(c=>{ const n=isEn?`${c.code}-${c.en}`:`${c.code}-${c.bn}`; curFrom.add(new Option(n,c.code)); curTo.add(new Option(n,c.code)); }); if(k&&f&&t){ curFrom.value=f; curTo.value=t; } else { curFrom.value="USD"; curTo.value="BDT"; } convertCurrency(); }
async function convertCurrency(){ const f=curFrom.value, t=curTo.value, a=parseFloat(curAmount.value); if(isNaN(a)||!f||!t){ curResult.textContent="-"; return; } const n=Date.now(); if(Object.keys(exchangeRates).length===0||(n-lastFetch>3600000)){ try{ const r=await fetch('https://api.exchangerate-api.com/v4/latest/USD'); const d=await r.json(); exchangeRates=d.rates; lastFetch=n; }catch(e){ return; } } const rf=exchangeRates[f], rt=exchangeRates[t]; if(rf&&rt){ curResult.textContent=`${t} ${((a/rf)*rt).toFixed(2)}`; } }
function swapCurrency(){ const t=curFrom.value; curFrom.value=curTo.value; curTo.value=t; convertCurrency(); }
curAmount.addEventListener('input',convertCurrency);

function renderPercentLang(){ pcTitle.textContent=isEn?'Percent Calculator':'à¦¶à¦¤à¦•à¦°à¦¾ à¦¹à¦¿à¦¸à¦¾à¦¬'; lblType.textContent=isEn?'Mode':'à¦§à¦°à¦¨'; pcResLabel.textContent=isEn?'Result':'à¦«à¦²à¦¾à¦«à¦²'; const o=pcMode.options; if(isEn){ o[0].text="X is what % of Y"; o[1].text="X% of Y"; o[2].text="% Increase/Decrease"; o[3].text="Reverse %"; } else { o[0].text="X, Y à¦à¦° à¦•à¦¤ %"; o[1].text="Y à¦à¦° X%"; o[2].text="% à¦¬à§ƒà¦¦à§à¦§à¦¿ / à¦¹à§à¦°à¦¾à¦¸"; o[3].text="à¦¬à¦¿à¦ªà¦°à§€à¦¤ %"; } updatePCLayout(); }
function updatePCLayout(){ const m=pcMode.value; if(m=='1'){ pcL1.textContent=isEn?'X (Part)':'X (à¦…à¦‚à¦¶)'; pcL2.textContent=isEn?'Y (Total)':'Y (à¦®à§‹à¦Ÿ)'; } else if(m=='2'){ pcL1.textContent=isEn?'Percent':'à¦¶à¦¤à¦•à¦°à¦¾'; pcL2.textContent=isEn?'Total':'à¦®à§‹à¦Ÿ'; } else if(m=='3'){ pcL1.textContent=isEn?'Old':'à¦ªà§à¦°à¦¾à¦¤à¦¨'; pcL2.textContent=isEn?'New':'à¦¨à¦¤à§à¦¨'; } else if(m=='4'){ pcL1.textContent=isEn?'Final':'à¦¶à§‡à¦· à¦®à¦¾à¦¨'; pcL2.textContent=isEn?'Percent':'à¦¶à¦¤à¦•à¦°à¦¾'; } doPercentCalc(); }
function doPercentCalc(){ const v1=parseFloat(pcIn1.value), v2=parseFloat(pcIn2.value); if(isNaN(v1)||isNaN(v2)){ pcRes.textContent='-'; return; } const m=pcMode.value; let r=0; if(m=='1')r=v2===0?0:(v1/v2)*100; else if(m=='2')r=(v1/100)*v2; else if(m=='3')r=v1===0?0:((v2-v1)/v1)*100; else if(m=='4')r=v1/(1+v2/100); pcRes.textContent=(m=='1'||m=='3')?r.toFixed(2)+"%":r.toFixed(2); }
pcIn1.addEventListener('input',doPercentCalc); pcIn2.addEventListener('input',doPercentCalc);

const cvData={ len:{en:"Length",bn:"à¦¦à§ˆà¦°à§à¦˜à§à¦¯",units:{m:{en:"Meter",bn:"à¦®à¦¿à¦Ÿà¦¾à¦°",val:1},km:{en:"Kilometer",bn:"à¦•à¦¿à¦®à¦¿",val:1000},cm:{en:"Centimeter",bn:"à¦¸à§‡à¦®à¦¿",val:0.01},mm:{en:"Millimeter",bn:"à¦®à¦¿à¦®à¦¿",val:0.001},in:{en:"Inch",bn:"à¦‡à¦à§à¦šà¦¿",val:0.0254},ft:{en:"Feet",bn:"à¦«à§à¦Ÿ",val:0.3048}}}, wgt:{en:"Weight",bn:"à¦“à¦œà¦¨",units:{kg:{en:"Kilogram",bn:"à¦•à§‡à¦œà¦¿",val:1},g:{en:"Gram",bn:"à¦—à§à¦°à¦¾à¦®",val:0.001},mg:{en:"Milligram",bn:"à¦®à¦¿à¦²à¦¿à¦—à§à¦°à¦¾à¦®",val:0.000001},lb:{en:"Pound",bn:"à¦ªà¦¾à¦‰à¦¨à§à¦¡",val:0.453592},oz:{en:"Ounce",bn:"à¦†à¦‰à¦¨à§à¦¸",val:0.0283495}}}, time:{en:"Time",bn:"à¦¸à¦®à¦¯à¦¼",units:{sec:{en:"Second",bn:"à¦¸à§‡à¦•à§‡à¦¨à§à¦¡",val:1},min:{en:"Minute",bn:"à¦®à¦¿à¦¨à¦¿à¦Ÿ",val:60},hr:{en:"Hour",bn:"à¦˜à¦£à§à¦Ÿà¦¾",val:3600},day:{en:"Day",bn:"à¦¦à¦¿à¦¨",val:86400}}}, speed:{en:"Speed",bn:"à¦—à¦¤à¦¿",units:{mps:{en:"m/s",bn:"à¦®à¦¿/à¦¸à§‡",val:1},kmph:{en:"km/h",bn:"à¦•à¦¿à¦®à¦¿/à¦˜à¦£à§à¦Ÿà¦¾",val:0.277778},mph:{en:"mph",bn:"à¦®à¦¾à¦‡à¦²/à¦˜à¦£à§à¦Ÿà¦¾",val:0.44704}}}, data:{en:"Data",bn:"à¦¡à¦¾à¦Ÿà¦¾",units:{byte:{en:"Byte",bn:"à¦¬à¦¾à¦‡à¦Ÿ",val:1},kb:{en:"KB",bn:"à¦•à§‡à¦¬à¦¿",val:1024},mb:{en:"MB",bn:"à¦à¦®à¦¬à¦¿",val:1048576},gb:{en:"GB",bn:"à¦œà¦¿à¦¬à¦¿",val:1073741824}}}, power:{en:"Power",bn:"à¦¶à¦•à§à¦¤à¦¿",units:{watt:{en:"Watt",bn:"à¦“à¦¯à¦¼à¦¾à¦Ÿ",val:1},kw:{en:"Kilowatt",bn:"à¦•à¦¿à¦²à§‹à¦“à¦¯à¦¼à¦¾à¦Ÿ",val:1000},hp:{en:"Horsepower",bn:"à¦…à¦¶à§à¦¬à¦¶à¦•à§à¦¤à¦¿",val:745.7}}}, temp:{en:"Temp",bn:"à¦¤à¦¾à¦ªà¦®à¦¾à¦¤à§à¦°à¦¾",units:{c:{en:"Celsius",bn:"à¦¸à§‡à¦²à¦¸à¦¿à¦¯à¦¼à¦¾à¦¸"},f:{en:"Fahrenheit",bn:"à¦«à¦¾à¦°à§‡à¦¨à¦¹à¦¾à¦‡à¦Ÿ"},k:{en:"Kelvin",bn:"à¦•à§‡à¦²à¦­à¦¿à¦¨"}}}, land:{en:"Indian Land",bn:"à¦œà¦®à¦¿à¦° à¦®à¦¾à¦ª",units:{sqft:{en:"Sq. Ft",bn:"à¦¬à¦°à§à¦—à¦«à§à¦Ÿ",val:1},sqmt:{en:"Sq. Mt",bn:"à¦¬à¦°à§à¦—à¦®à¦¿à¦Ÿà¦¾à¦°",val:10.7639},chotak:{en:"Chhatak",bn:"à¦›à¦Ÿà¦¾à¦•",val:45},kata:{en:"Katha",bn:"à¦•à¦¾à¦ à¦¾",val:720},bigha:{en:"Bigha",bn:"à¦¬à¦¿à¦˜à¦¾",val:14400},dec:{en:"Decimal",bn:"à¦¶à¦¤à¦•",val:435.6},acre:{en:"Acre",bn:"à¦à¦•à¦°",val:43560}}} };
function renderCvLang(){ cvTitle.textContent=isEn?'All-in-One Converter':'à¦…à¦²-à¦‡à¦¨-à¦“à¦¯à¦¼à¦¾à¦¨ à¦•à¦¨à¦­à¦¾à¦°à§à¦Ÿà¦¾à¦°'; cvLblCat.textContent=isEn?'Category':'à¦§à¦°à¦¨'; cvLblFrom.textContent=isEn?'From':'à¦¥à§‡à¦•à§‡'; cvLblTo.textContent=isEn?'To':'à¦¤à§‡'; const s=cvCat; const v=s.value; s.innerHTML=''; Object.keys(cvData).forEach(k=>{ s.add(new Option(isEn?cvData[k].en:cvData[k].bn,k)); }); s.value=v; updateCvUnits(true); }
function updateCvUnits(k=false){ const t=cvCat.value, u=cvData[t].units, s1=cvUnitFrom.value, s2=cvUnitTo.value; cvUnitFrom.innerHTML=''; cvUnitTo.innerHTML=''; Object.keys(u).forEach(k=>{ const n=isEn?u[k].en:u[k].bn; cvUnitFrom.add(new Option(n,k)); cvUnitTo.add(new Option(n,k)); }); if(k&&u[s1]&&u[s2]){ cvUnitFrom.value=s1; cvUnitTo.value=s2; } else { if(t==='temp'){cvUnitFrom.value='c';cvUnitTo.value='f';}else if(t==='land'){cvUnitFrom.value='kata';cvUnitTo.value='sqft';}else{cvUnitTo.selectedIndex=1;} } doConvert(); }
function doConvert(){ const v=parseFloat(cvIn.value); if(isNaN(v)){ cvOut.value=""; return; } const t=cvCat.value, u1=cvUnitFrom.value, u2=cvUnitTo.value; let r=0; if(t==='temp'){ if(u1===u2)r=v; else if(u1==='c'&&u2==='f')r=(v*9/5)+32; else if(u1==='c'&&u2==='k')r=v+273.15; else if(u1==='f'&&u2==='c')r=(v-32)*5/9; else if(u1==='f'&&u2==='k')r=(v-32)*5/9+273.15; else if(u1==='k'&&u2==='c')r=v-273.15; else if(u1==='k'&&u2==='f')r=(v-273.15)*9/5+32; cvOut.value=parseFloat(r.toFixed(4)); return; } r=(v*cvData[t].units[u1].val)/cvData[t].units[u2].val; cvOut.value=parseFloat(r.toFixed(6)); }
cvIn.addEventListener('input',doConvert);

const notes = [500, 200, 100, 50, 20, 10, 5, 2, 1];
function initCashCounter() {
    const container = document.getElementById('cashList');
    container.innerHTML = '';
    notes.forEach(n => {
        const row = document.createElement('div');
        row.className = 'info-row'; row.style.padding = '6px 10px';
        row.innerHTML = `<div style="display:flex; align-items:center; gap:10px; flex:1;"><span style="font-weight:700; width:40px; color:var(--accent);">â‚¹${n}</span><input type="number" id="note_${n}" placeholder="0" inputmode="numeric" oninput="doCashCalc()" style="height:35px; text-align:center; flex:1;"></div><div style="flex:1; text-align:right; font-weight:700; color:var(--text-sec);" id="sub_${n}">0</div>`;
        container.appendChild(row);
    });
}
function doCashCalc() {
    let grandTotal = 0;
    notes.forEach(n => {
        const qty = parseInt(document.getElementById(`note_${n}`).value) || 0;
        const sub = qty * n; grandTotal += sub;
        document.getElementById(`sub_${n}`).textContent = toBn(sub.toLocaleString('en-IN'));
    });
    document.getElementById('resCashTotal').textContent = (isEn ? "â‚¹ " : "à§³ ") + toBn(grandTotal.toLocaleString('en-IN'));
    const el = document.getElementById('cashInWords');
    if(grandTotal === 0) el.textContent = isEn ? "Zero" : "à¦¶à§à¦¨à§à¦¯ à¦Ÿà¦¾à¦•à¦¾";
    else el.textContent = isEn ? `Total: ${grandTotal.toLocaleString('en-IN')} Rupees` : `à¦®à§‹à¦Ÿ: ${toBn(grandTotal.toLocaleString('en-IN'))} à¦Ÿà¦¾à¦•à¦¾ à¦®à¦¾à¦¤à§à¦°`;
}
function clearCash() { 
    const state = {};
    notes.forEach(n => { const el = document.getElementById(`note_${n}`); state[el.id] = el.value; });
    undoHistory['cash'] = state;
    notes.forEach(n => { document.getElementById(`note_${n}`).value = ''; document.getElementById(`sub_${n}`).textContent = '0'; localStorage.removeItem('dlc_note_' + n); }); 
    doCashCalc(); 
}
function renderCashLang() { cashTitle.textContent = isEn ? 'Cash Counter' : 'à¦Ÿà¦¾à¦•à¦¾ à¦—à¦£à¦¨à¦¾'; lblCashTotal.textContent = isEn ? 'Grand Total' : 'à¦¸à¦°à§à¦¬à¦®à§‹à¦Ÿ à¦Ÿà¦¾à¦•à¦¾'; doCashCalc(); }

let undoHistory = {};
function initAutoSave() { document.querySelectorAll('input, select').forEach(el => { const savedVal = localStorage.getItem('dlc_' + el.id); if(savedVal) el.value = savedVal; el.addEventListener('input', () => localStorage.setItem('dlc_' + el.id, el.value)); el.addEventListener('change', () => localStorage.setItem('dlc_' + id, el.value)); }); }
function clearData(secId) { const sec = document.getElementById(secId); const inputs = sec.querySelectorAll('input, select'); let state = {}; inputs.forEach(el => state[el.id] = el.value); undoHistory[secId] = state; inputs.forEach(el => { if(el.tagName === 'INPUT') el.value = ''; localStorage.removeItem('dlc_' + el.id); }); triggerCalc(secId); }
function undoData(secId) { if(!undoHistory[secId]) return; const state = undoHistory[secId]; for(let id in state) { const el = document.getElementById(id); if(el) { el.value = state[id]; localStorage.setItem('dlc_' + id, state[id]); } } triggerCalc(secId); }
function triggerCalc(secId) { if(secId === 'fuel') doFuelCalc(); else if(secId === 'rate') calc(); else if(secId === 'emi') doEmiCalc(); else if(secId === 'currency') convertCurrency(); else if(secId === 'percent') doPercentCalc(); else if(secId === 'converter') doConvert(); else if(secId === 'age') doAgeCalc(); else if(secId === 'cash') doCashCalc(); }
function renderAllLangs(){ renderFuelLang(); renderRateLang(); renderPercentLang(); renderCvLang(); renderCurrencyLang(); renderAgeLang(); renderEmiLang(); renderCashLang(); }

initCashCounter();
renderAllLangs();
initAutoSave();
doFuelCalc(); doEmiCalc(); calc(); doPercentCalc(); doConvert(); doAgeCalc();
</script>
</body>
</html>
